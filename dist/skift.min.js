!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.skift=e():t.skift=e()}(window,function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";var i=Object.prototype.hasOwnProperty;function o(t){return decodeURIComponent(t.replace(/\+/g," "))}e.stringify=function(t,e){e=e||"";var n=[];for(var o in"string"!=typeof e&&(e="?"),t)i.call(t,o)&&n.push(encodeURIComponent(o)+"="+encodeURIComponent(t[o]));return n.length?e+n.join("&"):""},e.parse=function(t){for(var e,n=/([^=?&]+)=?([^&]*)/g,i={};e=n.exec(t);){var r=o(e[1]),a=o(e[2]);r in i||(i[r]=a)}return i}},function(t,e,n){"use strict";n.r(e);var i=n(0),o=n.n(i);function r(t,e){console.log("Split testing event: "+t,e)}function a(t,e,n){t.addEventListener("click",function(){r(e,n)})}var s,c={loadUserSession:function(){return function(t){for(var e=u.cookieName+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var o=n[i];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(e))return o.substring(e.length,o.length)}return null}()},saveUserSession:function(t,e){!function(t,e,n){var i,o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3),i="; expires="+o.toUTCString(),document.cookie=t+"="+e+i+"; path=/"}(u.cookieName,t,e)}},u=new(function(){function t(){this._sessionPersister=c,this._trackingHandler={track:r,trackLink:a},this._userSessionDaysToLive=3,this._cookieName="skiftABTest",this._globalCondition=function(){return Promise.resolve(!0)}}return Object.defineProperty(t.prototype,"sessionPersister",{get:function(){return this._sessionPersister},set:function(t){this._sessionPersister=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trackingHandler",{get:function(){return this._trackingHandler},set:function(t){this._trackingHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"userSessionDaysToLive",{get:function(){return this._userSessionDaysToLive},set:function(t){this._userSessionDaysToLive=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cookieName",{get:function(){return this._cookieName},set:function(t){this._cookieName=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"globalCondition",{get:function(){return this._globalCondition},set:function(t){this._globalCondition=t},enumerable:!0,configurable:!0}),t}()),l=function(){function t(t){this._config=t}return t.prototype.setTestVariation=function(t,e){var n=this.loadVariations();n[t]=e,this.saveVariations(n)},t.prototype.getTestVariation=function(t){return this.loadVariations()[t]},t.prototype.reset=function(){this.saveVariations({})},t.prototype.saveVariations=function(t){this._config.sessionPersister.saveUserSession(JSON.stringify(t),this._config.userSessionDaysToLive)},t.prototype.loadVariations=function(){return JSON.parse(this._config.sessionPersister.loadUserSession()||"{}")},t}(),f=(new l(u),Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}),p=function(t,e,n,i){return new(n||(n=Promise))(function(o,r){function a(t){try{c(i.next(t))}catch(t){r(t)}}function s(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}c((i=i.apply(t,e||[])).next())})},h=function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};!function(t){t.UNINITIALIZED="uninitialized",t.INITIALIZING="initializing",t.INITIALIZED="initialized",t.CANCELED="canceled"}(s||(s={}));var m=function(){function t(t,e,n){this._state=s.UNINITIALIZED,this._finalStateListeners=[],this._variations=[],this._name=t,this._userAgentInfo=e,this._condition=function(){return Promise.resolve(!0)},this._config=n,this._userSession=new l(n)}return Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),t.prototype.setCondition=function(t){return this._condition=t,this},t.prototype.addVariation=function(t){if("string"!=typeof t.name||""===t.name||this.getVariation(t.name))throw new Error('Split test "'+this.name+'": Variation must have a unique name. Was "'+t.name+'"');return this._variations.push(f({},t,{normalizedWeight:0,weight:"number"==typeof t.weight?t.weight:1})),this.normalizeVariationWeights(),this},t.prototype.setup=function(){return p(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:if(0===this._variations.length)throw new Error("Skift: can't setup a test without variations");return this._state===s.INITIALIZED?[2,!0]:(this.transitionState(s.INITIALIZING),[4,this.shouldRun(this._userAgentInfo)]);case 1:return e.sent()?((t=this.getVariation(this._userSession.getTestVariation(this.name)))||(t=this.selectRandomVariation(),this._userSession.setTestVariation(this.name,t.name)),this._selectedVariation=t,"function"==typeof t.setup&&t.setup.call(this,this._userAgentInfo),!1!==t.trackEventAutoPublish&&this.trackViewed(),this.transitionState(s.INITIALIZED),[2,!0]):(this.transitionState(s.CANCELED),[2,!1])}})})},t.prototype.isInitialized=function(){return p(this,void 0,void 0,function(){var t=this;return h(this,function(e){switch(e.label){case 0:return this._state!==s.INITIALIZING?[3,2]:[4,new Promise(function(e){t.subscribeStateListener(function(){e(t._state===s.INITIALIZED)})})];case 1:return[2,e.sent()];case 2:return[2,this._state===s.INITIALIZED]}})})},t.prototype.getVariation=function(t){return this._variations.filter(function(e){return e.name===t})[0]},t.prototype.getVariationUrl=function(t){var e=this.name+"="+t,n=o.a.parse(location.search);try{return n.abtest=btoa(e),location.protocol+"//"+location.host+location.pathname+o.a.stringify(n,!0)+location.hash}catch(t){return location.href}},t.prototype.trackViewed=function(){this.trackEvent("ExperimentViewed")},t.prototype.trackActionPerformed=function(t,e){this.trackEvent("ExperimentActionPerformed",{action:t,actionTarget:e||""})},t.prototype.trackLink=function(t,e){this.internalTrackLink(t,"ExperimentActionPerformed",{action:"Click",actionTarget:e||t.textContent})},t.prototype.internalTrackLink=function(t,e,n){var i=f({},n,{experimentName:this._name,browser:this._userAgentInfo.name,browserVersion:this._userAgentInfo.version,isMobile:this._userAgentInfo.isMobile,variationName:this._selectedVariation.name});this._config.trackingHandler.trackLink(t,e,i)},t.prototype.trackEvent=function(t,e){var n=f({},e,{experimentName:this._name,browser:this._userAgentInfo.name,browserVersion:this._userAgentInfo.version,isMobile:this._userAgentInfo.isMobile,variationName:this._selectedVariation.name});this._config.trackingHandler.track(t,n)},t.prototype.shouldRun=function(t){return p(this,void 0,void 0,function(){var e;return h(this,function(n){switch(n.label){case 0:return e=[this._config.globalCondition(t),this._condition(t)].map(function(t){return Promise.resolve(t)}),[4,Promise.all(e)];case 1:return[2,n.sent().every(function(t){return t})]}})})},t.prototype.normalizeVariationWeights=function(){var t=this._variations.reduce(function(t,e){return t+e.weight},0);this._variations.forEach(function(e){e.normalizedWeight=e.weight/t})},t.prototype.transitionState=function(t){this._state=t,t!==s.INITIALIZING&&(this._finalStateListeners.forEach(function(t){return t()}),this._finalStateListeners=[])},t.prototype.subscribeStateListener=function(t){this._finalStateListeners.push(t)},t.prototype.selectRandomVariation=function(){for(var t=0,e=0,n=Math.random();t<this._variations.length&&(e+=this._variations[t].normalizedWeight)<n;t++);return this._variations[t]},t}(),d=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};n.d(e,"tests",function(){return g}),n.d(e,"config",function(){return v}),n.d(e,"getTest",function(){return y}),n.d(e,"create",function(){return k});var g=[],b=function(t){return void 0===t&&(t=navigator.userAgent),d({},function(t){var e,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?{name:"IE",version:(e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||""}:"Chrome"===n[1]&&null!=(e=t.match(/\bOPR\/(\d+)/))?{name:"Opera",version:e[1]}:(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),{name:n[0],version:n[1]})}(t),{isMobile:function(t){return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}(t||navigator.vendor)})}();function v(t){void 0===t&&(t={}),t.cookieName&&(u.cookieName=t.cookieName),t.globalCondition&&(u.globalCondition=t.globalCondition),t.trackingHandler&&(u.trackingHandler=t.trackingHandler),t.userSessionDaysToLive&&(u.userSessionDaysToLive=t.userSessionDaysToLive)}function y(t){return g.filter(function(e){return e.name===t})[0]}function k(t){var e=new m(t,b,u);return g.push(e),e}}])});