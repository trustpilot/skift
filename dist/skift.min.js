!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.skift=e():t.skift=e()}(window,function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){"use strict";var i=Object.prototype.hasOwnProperty;function r(t){return decodeURIComponent(t.replace(/\+/g," "))}e.stringify=function(t,e){e=e||"";var n=[];for(var r in"string"!=typeof e&&(e="?"),t)i.call(t,r)&&n.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return n.length?e+n.join("&"):""},e.parse=function(t){for(var e,n=/([^=?&]+)=?([^&]*)/g,i={};e=n.exec(t);){var o=r(e[1]),a=r(e[2]);o in i||(i[o]=a)}return i}},function(t,e,n){var i=n(4);t.exports="string"==typeof i?i:i.toString()},function(t,e,n){"use strict";n.r(e);var i=n(0),r=n.n(i),o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};var a=new(function(){function t(){}return t.prototype.track=function(t,e){console.log("Split testing event: "+t,e)},t.prototype.trackLink=function(t,e,n){var i=this;t.addEventListener("click",function(){i.track(e,n)})},t}()),s={loadUserSession:function(){return function(t){for(var e=c.cookieName+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var r=n[i];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(e))return r.substring(e.length,r.length)}return null}()},saveUserSession:function(t,e){!function(t,e,n){var i,r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3),i="; expires="+r.toUTCString(),document.cookie=t+"="+e+i+"; path=/"}(c.cookieName,t,e)}},c=new(function(){function t(){this._sessionPersister=s,this._tracking=a,this._userSessionDaysToLive=3,this._cookieName="skiftABTest",this._globalCondition=function(){return Promise.resolve(!0)}}return Object.defineProperty(t.prototype,"sessionPersister",{get:function(){return this._sessionPersister},set:function(t){this._sessionPersister=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tracking",{get:function(){return this._tracking},set:function(t){this._tracking=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"userSessionDaysToLive",{get:function(){return this._userSessionDaysToLive},set:function(t){this._userSessionDaysToLive=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cookieName",{get:function(){return this._cookieName},set:function(t){this._cookieName=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"globalCondition",{get:function(){return this._globalCondition},set:function(t){this._globalCondition=t},enumerable:!0,configurable:!0}),t}()),u=function(){function t(t){this._config=t}return t.prototype.setTestVariation=function(t,e){var n=this.loadVariations();n[t]=e,this.saveVariations(n)},t.prototype.getTestVariation=function(t){return this.loadVariations()[t]},t.prototype.reset=function(){this.saveVariations({})},t.prototype.saveVariations=function(t){this._config.sessionPersister.saveUserSession(JSON.stringify(t),this._config.userSessionDaysToLive)},t.prototype.loadVariations=function(){return JSON.parse(this._config.sessionPersister.loadUserSession()||"{}")},t}(),l=(new u(c),n(1));var p,f=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},d=function(t,e,n,i){return new(n||(n=Promise))(function(r,o){function a(t){try{c(i.next(t))}catch(t){o(t)}}function s(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}c((i=i.apply(t,e||[])).next())})},h=function(t,e){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};!function(t){t.UNINITIALIZED="uninitialized",t.INITIALIZING="initializing",t.INITIALIZED="initialized",t.CANCELED="canceled"}(p||(p={}));var m=function(){function t(t,e){this._state=p.UNINITIALIZED,this._finalStateListeners=[],this._variations=[],this._name=t,this._userAgentInfo=function(t){return void 0===t&&(t=navigator.userAgent),o({},function(t){var e,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?{name:"IE",version:(e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||""}:"Chrome"===n[1]&&null!=(e=t.match(/\bOPR\/(\d+)/))?{name:"Opera",version:e[1]}:(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),{name:n[0],version:n[1]})}(t),{isMobile:function(t){return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}(t||navigator.vendor)})}(),this._condition=function(){return Promise.resolve(!0)},this._config=e,this._userSession=new u(e)}return Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"userAgentInfo",{get:function(){return this._userAgentInfo},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"variations",{get:function(){return this._variations},enumerable:!0,configurable:!0}),t.prototype.getCurrentVariation=function(){return this._currentVariation},t.prototype.setCurrentVariation=function(t){return d(this,void 0,void 0,function(){return h(this,function(e){switch(e.label){case 0:return this._variations.some(function(e){return e.name===t})?(this.transitionState(p.UNINITIALIZED),this._userSession.setTestVariation(this.name,t),[4,this.setup()]):[3,2];case 1:return e.sent(),location.reload(),[2,Promise.resolve(!0)];case 2:return[2,Promise.resolve(!1)]}})})},Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),t.prototype.setCondition=function(t){return this._condition=t,this},t.prototype.addVariation=function(t){if("string"!=typeof t.name||""===t.name||this.getVariation(t.name))throw new Error('Split test "'+this.name+'": Variation must have a unique name. Was "'+t.name+'"');return this._variations.push(f({},t,{normalizedWeight:0,weight:"number"==typeof t.weight?t.weight:1})),this.normalizeVariationWeights(),this},t.prototype.setup=function(){return d(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:if(0===this._variations.length)throw new Error("Skift: can't setup a test without variations");return this._state===p.INITIALIZED?[2,!0]:(this.transitionState(p.INITIALIZING),[4,this.shouldRun(this._userAgentInfo)]);case 1:return e.sent()?((t=this.getVariation(this._userSession.getTestVariation(this.name)))||(t=this.selectRandomVariation(),this._userSession.setTestVariation(this.name,t.name)),this._currentVariation=t,"function"==typeof t.setup&&t.setup.call(this,this._userAgentInfo),!1!==t.trackEventAutoPublish&&this.trackViewed(),this.transitionState(p.INITIALIZED),function(t){var e=document.createElement("div");e.className="skiftui";var n=document.createElement("style");n.innerHTML=l;var i=document.createElement("div");i.className="container";var r=document.createElement("span");function o(){e.className="skiftui hideme"}r.className="close",r.innerText="X",r.addEventListener("click",o);var a=document.createElement("div");a.className="header",a.innerText="Skift",a.appendChild(r),i.appendChild(a),function(t,e){var n=t.getCurrentVariation(),i=t.userAgentInfo,r=document.createElement("div");r.className="test info";var o=document.createElement("div");o.className="test details";var a=document.createElement("div");a.innerHTML='<span class="data-label">Test</span><span class="data-value">'+t.name+"</span>";var s=document.createElement("div");s.innerHTML='\n        <span class="data-label">Current variation</span>\n        <span class="data-value">'+n.name+" "+function(t){return"("+Math.round(100*t.normalizedWeight)+"%)"}(n)+"</span>\n    ";var c=document.createElement("div");c.innerHTML='\n        <span class="data-label">Browser</span>\n        <span class="data-value">'+i.name+" "+i.version+"</span>\n    ";var u=document.createElement("div");u.innerHTML='\n        <span class="data-label">Mobile device</span>\n        <span class="data-value">'+i.isMobile+"</span>\n    ";var l=document.createElement("div");l.innerText="Variations available: ",o.appendChild(l);var p=document.createElement("ul");return t.variations.map(function(n){var i=document.createElement("li"),r=document.createElement("a");r.innerText=n.name,r.setAttribute("href","#"),r.addEventListener("click",function(){e(),t.setCurrentVariation(n.name)}),i.appendChild(r),p.appendChild(i)}),r.appendChild(a),r.appendChild(s),r.appendChild(c),r.appendChild(u),o.appendChild(p),[r,o]}(t,o).forEach(function(t){i.appendChild(t)}),e.appendChild(n),e.appendChild(i),document.body.appendChild(e)}(this),[2,!0]):(this.transitionState(p.CANCELED),[2,!1])}})})},t.prototype.isInitialized=function(){return d(this,void 0,void 0,function(){var t=this;return h(this,function(e){switch(e.label){case 0:return this._state!==p.INITIALIZING?[3,2]:[4,new Promise(function(e){t.subscribeStateListener(function(){e(t._state===p.INITIALIZED)})})];case 1:return[2,e.sent()];case 2:return[2,this._state===p.INITIALIZED]}})})},t.prototype.getVariation=function(t){return this._variations.filter(function(e){return e.name===t})[0]},t.prototype.getVariationUrl=function(t){var e=this.name+"="+t,n=r.a.parse(location.search);try{return n.abtest=btoa(e),location.protocol+"//"+location.host+location.pathname+r.a.stringify(n,!0)+location.hash}catch(t){return location.href}},t.prototype.trackViewed=function(){this.trackEvent("ExperimentViewed")},t.prototype.trackActionPerformed=function(t,e){this.trackEvent("ExperimentActionPerformed",{action:t,actionTarget:e||""})},t.prototype.trackLink=function(t,e){this.internalTrackLink(t,"ExperimentActionPerformed",{action:"Click",actionTarget:e||t.textContent})},t.prototype.internalTrackLink=function(t,e,n){var i=f({},n,{experimentName:this._name,browser:this._userAgentInfo.name,browserVersion:this._userAgentInfo.version,isMobile:this._userAgentInfo.isMobile,variationName:this._currentVariation.name});this._config.tracking.trackLink(t,e,i)},t.prototype.trackEvent=function(t,e){var n=f({},e,{experimentName:this._name,browser:this._userAgentInfo.name,browserVersion:this._userAgentInfo.version,isMobile:this._userAgentInfo.isMobile,variationName:this._currentVariation.name});this._config.tracking.track(t,n)},t.prototype.shouldRun=function(t){return d(this,void 0,void 0,function(){var e;return h(this,function(n){switch(n.label){case 0:return e=[this._config.globalCondition(t),this._condition(t)].map(function(t){return Promise.resolve(t)}),[4,Promise.all(e)];case 1:return[2,n.sent().every(function(t){return t})]}})})},t.prototype.normalizeVariationWeights=function(){var t=this._variations.reduce(function(t,e){return t+e.weight},0);this._variations.forEach(function(e){e.normalizedWeight=e.weight/t})},t.prototype.transitionState=function(t){this._state=t,t!==p.INITIALIZING&&(this._finalStateListeners.forEach(function(t){return t()}),this._finalStateListeners=[])},t.prototype.subscribeStateListener=function(t){this._finalStateListeners.push(t)},t.prototype.selectRandomVariation=function(){for(var t=0,e=0,n=Math.random();t<this._variations.length&&(e+=this._variations[t].normalizedWeight)<n;t++);return this._variations[t]},t}();function g(t){void 0===t&&(t={}),t.cookieName&&(c.cookieName=t.cookieName),t.globalCondition&&(c.globalCondition=t.globalCondition),t.tracking&&(c.tracking=t.tracking),t.userSessionDaysToLive&&(c.userSessionDaysToLive=t.userSessionDaysToLive),t.sessionPersister&&(c.sessionPersister=t.sessionPersister)}function v(t){return new m(t,c)}n.d(e,"config",function(){return g}),n.d(e,"create",function(){return v})},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",i=t[3];if(!i)return n;if(e&&"function"==typeof btoa){var r=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(i),o=i.sources.map(function(t){return"/*# sourceURL="+i.sourceRoot+t+" */"});return[n].concat(o).concat([r]).join("\n")}return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},r=0;r<this.length;r++){var o=this[r][0];"number"==typeof o&&(i[o]=!0)}for(r=0;r<t.length;r++){var a=t[r];"number"==typeof a[0]&&i[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,'.skiftui .container{position:fixed;bottom:5px;right:5px;max-width:300px;max-height:500px;color:#292929;z-index:999;background-color:#fff;border:2px solid #00b67a}.skiftui.hideme{display:none}.skiftui .header{position:relative;padding:8px;background-color:#00b67a;color:#fff;font-size:16px;line-height:16px;font-weight:700}.skiftui .close{position:absolute;right:8px;background-color:#fff;color:#00b67a;width:16px;border-radius:50%;cursor:pointer;text-align:center;line-height:16px;font-size:12px}.skiftui .test.info{padding:8px 8px 0}.skiftui .test.details{padding:8px;background:#f4f7f9;border-top:1px solid #dfe2e5;font-size:12px}.skiftui .test.details ul{margin:0}.skiftui .data-label{display:inline-block;margin-bottom:2px;margin-right:5px;color:#292929}.skiftui .data-label:after{content:":"}.skiftui .data-value{color:#000;font-weight:700;text-transform:capitalize}',""])}])});