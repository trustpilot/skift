{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 9518ccfaeb61b08382ea","webpack:///./src/config.ts","webpack:///./src/usersession.ts","webpack:///./src/splittest.ts","webpack:///./src/behavioral-subject.ts","webpack:///./src/tracking.ts","webpack:///./node_modules/querystringify/index.js","webpack:///./src/alwaysPromise.ts","webpack:///./src/index.ts","webpack:///./src/main.ts","webpack:///./src/useragentinfo.ts","webpack:///./src/usersessioncookiepersister.ts","webpack:///./src/ui.ts","webpack:///./src/ui.css?f158","webpack:///./src/ui.css","webpack:///./node_modules/css-loader/lib/css-base.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;AC7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,CAAC;AACD;AACA;AACA,kCAAkC,aAAa,EAAE;AACjD;AACA;AACA;AACA,8BAA8B,cAAc;AAC5C;AACA;;;;;;;;;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA,yIAAuF;AACvF;AACA;AACA;AACA,CAAC;AACO;AACR;AACA;;;;;;;;;;;;;;;AC3BA;AAAA;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,iEAAiE,uBAAuB,EAAE,4BAA4B;AACrJ;AACA,KAAK;AACL;AACA;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA;AAC4B;AACU;AACtC;AACA;AACwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,aAAa;AACnD;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kFAAkF,UAAU,EAAE;AAC9F;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,cAAc,2FAA2F;AAClJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,6BAA6B;AAC7B;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,qDAAqD,wBAAwB,EAAE;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,4EAA4E,+BAA+B,EAAE;AAC7G;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,2DAA2D,YAAY,EAAE;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,qGAAqG,OAAO;AAC3K;AACA;AACA;AACA;AACA,0EAA0E;AAC1E;AACA;AACA;AACA,CAAC;AACO;;;;;;;;AClQR;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,+BAA+B,EAAE;AACvF;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACO;;;;;;;;AChBR;AAAA;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,oBAAoB,kCAAkC;AAC1F;;;;;;;;ACdA;;AAEA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;ACvEA;AAAA;AACA;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,iEAAiE,uBAAuB,EAAE,4BAA4B;AACrJ;AACA,KAAK;AACL;AACA;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;;;;;;;;;;;;;;;;;;;;ACzCA;AAAA;AACA;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,iEAAiE,uBAAuB,EAAE,4BAA4B;AACrJ;AACA,KAAK;AACL;AACA;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA;AAC0K;AACtJ;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK,EAAE,EAAE;AACT,CAAC;AACO;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzEA;AAAA;AACA;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,iEAAiE,uBAAuB,EAAE,4BAA4B;AACrJ;AACA,KAAK;AACL;AACA;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA;AACA;AACoB;AACQ;AACR;AACkB;AACtC;AACA;AACwB;AACxB;AACA;AACA;AACA;AACA,gCAAgC,iBAAiB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,wBAAwB,EAAE;AAChE;AACA;AACA;AACA;AACA,wCAAwC,oCAAoC,EAAE;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8EAA8E,UAAU,EAAE;AAC1F;AACA,SAAS;AACT,KAAK;AACL;;;;;;;;ACjKA;AAAA;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,wBAAwB,uBAAuB;AACrE;;;;;;;;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA,uDAAuD;AACvD;AACA;AACA;AACA,qCAAqC;AACrC,mBAAmB,eAAe;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;;;;;;;AChCA;AAAA;AACA;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,iEAAiE,uBAAuB,EAAE,4BAA4B;AACrJ;AACA,KAAK;AACL;AACA;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,yTAAyT,8PAA8P,EAAE,kEAAkE,MAAM,MAAM;AACvoB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS,EAAE,EAAE;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACxIA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA,C;;;;;;ACXA;AACA;;;AAGA;AACA,4CAA6C,oBAAoB,iBAAiB,gBAAgB,iBAAiB,kBAAkB,mBAAmB,iBAAiB,8BAA8B,8BAA8B,8CAA8C,iCAAiC,eAAe,GAAG,6BAA6B,mBAAmB,eAAe,GAAG,qBAAqB,uBAAuB,kBAAkB,GAAG,gBAAgB,kBAAkB,GAAG,kBAAkB,uBAAuB,WAAW,YAAY,kBAAkB,wBAAwB,8BAA8B,mBAAmB,oBAAoB,sBAAsB,GAAG,sBAAsB,0BAA0B,uBAAuB,sBAAsB,mBAAmB,GAAG,4BAA4B,mBAAmB,GAAG,sBAAsB,gBAAgB,sBAAsB,+BAA+B,GAAG,mBAAmB,8BAA8B,mBAAmB,GAAG,iBAAiB,kBAAkB,wBAAwB,4BAA4B,uBAAuB,cAAc,gBAAgB,8BAA8B,gBAAgB,iBAAiB,gBAAgB,uBAAuB,oBAAoB,GAAG,iBAAiB,mBAAmB,sBAAsB,sBAAsB,8BAA8B,oBAAoB,mBAAmB,cAAc,GAAG;;AAE/6C;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mCAAmC,gBAAgB;AACnD,IAAI;AACJ;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA,YAAY,oBAAoB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,oDAAoD,cAAc;;AAElE;AACA","file":"skift.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"skift\"] = factory();\n\telse\n\t\troot[\"skift\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9518ccfaeb61b08382ea","import usersessioncookiepersister from './usersessioncookiepersister';\nvar defaultTrackingEventHandler = (function () {\n    function log(event, trackingData) {\n        console.log('Split testing event: ' + event, trackingData);\n    }\n    return {\n        track: log,\n        trackLink: function (element, event, trackingData) {\n            element.addEventListener('click', function () {\n                log(event, trackingData);\n            });\n        }\n    };\n})();\nvar config = {\n    cookieName: 'skiftABTest',\n    globalCondition: function () { return true; },\n    sessionPersister: usersessioncookiepersister,\n    tracking: defaultTrackingEventHandler,\n    userSessionDaysToLive: 3,\n    uiCondition: function () { return false; }\n};\nexport default config;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/config.ts\n// module id = 0\n// module chunks = 0","import config from './config';\nvar UserSession = /** @class */ (function () {\n    function UserSession() {\n    }\n    UserSession.prototype.setTestVariation = function (testName, variationName) {\n        var variationsMap = this.loadVariations();\n        variationsMap[testName] = variationName;\n        this.saveVariations(variationsMap);\n    };\n    UserSession.prototype.getTestVariation = function (testName) {\n        var variationsMap = this.loadVariations();\n        return variationsMap[testName];\n    };\n    UserSession.prototype.reset = function () {\n        this.saveVariations({});\n    };\n    UserSession.prototype.saveVariations = function (variationsMap) {\n        config.sessionPersister.saveUserSession(JSON.stringify(variationsMap), config.userSessionDaysToLive);\n    };\n    UserSession.prototype.loadVariations = function () {\n        var variationsMap = JSON.parse(config.sessionPersister.loadUserSession() || '{}');\n        return variationsMap;\n    };\n    return UserSession;\n}());\nexport { UserSession };\nvar userSession = new UserSession();\nexport default userSession;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/usersession.ts\n// module id = 1\n// module chunks = 0","var __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [0, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport userSession from './usersession';\nimport { BehavioralSubject } from './behavioral-subject';\nimport { trackingDataExtenderFactory } from './tracking';\nimport qs from 'querystringify';\nimport config from './config';\nimport { alwaysPromise } from './alwaysPromise';\nvar SplitTest = /** @class */ (function () {\n    function SplitTest(name, userAgentInfo, trackingDataExtender) {\n        this.name = name;\n        this.userAgentInfo = userAgentInfo;\n        this.trackingDataExtender = trackingDataExtender;\n        this.state = 'uninitialized';\n        this.changes = new BehavioralSubject(this);\n        this.finalStateListeners = [];\n        this._variations = [];\n        this.condition = function () { return true; };\n        this.extendTrackingData(trackingDataExtenderFactory({\n            experimentName: name\n        }));\n    }\n    Object.defineProperty(SplitTest.prototype, \"variations\", {\n        get: function () {\n            return this._variations;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Determines whether this test is able to run or not.\n     */\n    SplitTest.prototype.shouldRun = function (userAgentInfo) {\n        return __awaiter(this, void 0, void 0, function () {\n            var conditionPromises;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        conditionPromises = [\n                            config.globalCondition(userAgentInfo),\n                            this.condition(userAgentInfo)\n                        ].map(alwaysPromise);\n                        return [4 /*yield*/, Promise.all(conditionPromises)];\n                    case 1: return [2 /*return*/, (_a.sent()).every(function (a) { return a; })];\n                }\n            });\n        });\n    };\n    SplitTest.prototype.setCondition = function (condition) {\n        this.condition = condition;\n        return this;\n    };\n    SplitTest.prototype.addVariation = function (variation) {\n        if (typeof variation.name !== 'string' ||\n            variation.name === '' ||\n            this.getVariation(variation.name)) {\n            throw new Error(\"Split test \\\"\" + this\n                .name + \"\\\": Variation must have a unique name. Was \\\"\" + variation.name + \"\\\"\");\n        }\n        this._variations.push(__assign({}, variation, { normalizedWeight: 0, weight: typeof variation.weight === 'number' ? variation.weight : 1 }));\n        this.normalizeVariationWeights();\n        this.changes.next(this);\n        return this;\n    };\n    SplitTest.prototype.setup = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var passesConditions, variation;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (this._variations.length === 0) {\n                            throw new Error(\"Skift: can't setup a test without variations\");\n                        }\n                        if (this.state === 'initialized') {\n                            // Already set up?\n                            return [2 /*return*/, true];\n                        }\n                        this.transitionState('initializing');\n                        return [4 /*yield*/, this.shouldRun(this.userAgentInfo)];\n                    case 1:\n                        passesConditions = _a.sent();\n                        if (!passesConditions) {\n                            this.transitionState('canceled');\n                            return [2 /*return*/, false];\n                        }\n                        variation = this.getVariation(userSession.getTestVariation(this.name));\n                        if (!variation) {\n                            variation = this.selectRandomVariation();\n                            userSession.setTestVariation(this.name, variation.name);\n                        }\n                        this.extendTrackingData(trackingDataExtenderFactory({\n                            variationName: variation.name\n                        }));\n                        // Step 3: Setup variation\n                        if (typeof variation.setup === 'function') {\n                            variation.setup.call(this, this.userAgentInfo);\n                        }\n                        // Step 4: Publish track event\n                        if (variation.trackEventAutoPublish !== false) {\n                            this.trackViewed();\n                        }\n                        this.transitionState('initialized');\n                        this.changes.next(this);\n                        return [2 /*return*/, true];\n                }\n            });\n        });\n    };\n    SplitTest.prototype.isInitialized = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            var state;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        state = this.state;\n                        if (!(state === 'initializing')) return [3 /*break*/, 2];\n                        return [4 /*yield*/, new Promise(function (resolve, reject) {\n                                _this.subscribeStateListener(function () {\n                                    resolve(_this.state === 'initialized');\n                                });\n                            })];\n                    case 1: return [2 /*return*/, _a.sent()];\n                    case 2: return [2 /*return*/, this.state === 'initialized'];\n                }\n            });\n        });\n    };\n    SplitTest.prototype.getVariation = function (name) {\n        return this._variations.filter(function (v) { return v.name === name; })[0];\n    };\n    SplitTest.prototype.getVariationUrl = function (variationName) {\n        var param = this.name + \"=\" + variationName;\n        var query = qs.parse(location.search);\n        try {\n            query.abtest = btoa(param);\n            return (location.protocol +\n                '//' +\n                location.host +\n                location.pathname +\n                qs.stringify(query, true) +\n                location.hash);\n        }\n        catch (e) {\n            return location.href;\n        }\n    };\n    /**\n     * The tracking data extenders are called just before any event is published to the event handler.\n     */\n    SplitTest.prototype.extendTrackingData = function (trackingDataExtender) {\n        var currentExtender = this.trackingDataExtender;\n        this.trackingDataExtender = function (trackingData, eventName) {\n            return trackingDataExtender(currentExtender(trackingData, eventName), eventName);\n        };\n        return this;\n    };\n    /**\n     * Emits an \"Experiment Viewed\" tracking event\n     */\n    SplitTest.prototype.trackViewed = function () {\n        this.trackEvent('ExperimentViewed');\n    };\n    /**\n     * Emits an \"Experiment Action Performed\" tracking event\n     * @param action Specifies the action type that has been performed\n     * @param target Specifies a target the action has affected or originated from\n     */\n    SplitTest.prototype.trackActionPerformed = function (action, target) {\n        this.trackEvent('ExperimentActionPerformed', {\n            action: action,\n            actionTarget: target || ''\n        });\n    };\n    /**\n     * Attaches a <code>trackActionPerformed</code> call as a handler to a link.\n     * @param element The DOM element to be bound with track method.\n     * @param name A human readable name of the link. If left out, the innerText of the element is used\n     */\n    SplitTest.prototype.trackLink = function (element, name) {\n        var event = 'ExperimentActionPerformed';\n        var trackingData = this.trackingDataExtender({\n            action: 'Click',\n            actionTarget: name || element.textContent\n        }, event);\n        config.tracking.trackLink(element, event, trackingData);\n    };\n    SplitTest.prototype.normalizeVariationWeights = function () {\n        var weightsSum = this._variations.reduce(function (sum, variation) { return sum + variation.weight; }, 0);\n        this._variations.forEach(function (variation) {\n            variation.normalizedWeight = variation.weight / weightsSum;\n        });\n    };\n    SplitTest.prototype.transitionState = function (state) {\n        this.state = state;\n        if (state !== 'initializing') {\n            this.finalStateListeners.forEach(function (l) { return l(); });\n            this.finalStateListeners = [];\n        }\n    };\n    SplitTest.prototype.subscribeStateListener = function (listener) {\n        this.finalStateListeners.push(listener);\n    };\n    SplitTest.prototype.selectRandomVariation = function () {\n        var i = 0;\n        // Disable the rule for now and refactor this, when covered by a test.\n        // tslint:disable:max-line-length no-conditional-assignment no-empty\n        for (var runningTotal = 0, testSegment = Math.random(); i < this._variations.length && (runningTotal += this._variations[i].normalizedWeight) < testSegment; i++) { }\n        // tslint:enable:max-line-length no-conditional-assignment no-empty\n        return this._variations[i];\n    };\n    SplitTest.prototype.trackEvent = function (event, trackingData) {\n        var allTrackingData = this.trackingDataExtender(trackingData || {}, event);\n        config.tracking.track(event, allTrackingData);\n    };\n    return SplitTest;\n}());\nexport { SplitTest };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/splittest.ts\n// module id = 2\n// module chunks = 0","var BehavioralSubject = /** @class */ (function () {\n    function BehavioralSubject(value) {\n        this.subscribers = [];\n        this._value = value;\n    }\n    BehavioralSubject.prototype.next = function (value) {\n        var _this = this;\n        this._value = value;\n        this.subscribers.forEach(function (observer) { return observer(_this._value); });\n    };\n    BehavioralSubject.prototype.subscribe = function (observer) {\n        observer(this._value);\n        this.subscribers.push(observer);\n    };\n    return BehavioralSubject;\n}());\nexport { BehavioralSubject };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/behavioral-subject.ts\n// module id = 3\n// module chunks = 0","var __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\n/**\n * Constructs a new TrackingDataExtender that extending the existing tracking data with the provided tracking data\n * @param newTrackingData\n */\nexport function trackingDataExtenderFactory(newTrackingData) {\n    return function (trackingData) { return (__assign({}, trackingData, newTrackingData)); };\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/tracking.ts\n// module id = 4\n// module chunks = 0","'use strict';\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Decode a URI encoded string.\n *\n * @param {String} input The URI encoded string.\n * @returns {String} The decoded string.\n * @api private\n */\nfunction decode(input) {\n  return decodeURIComponent(input.replace(/\\+/g, ' '));\n}\n\n/**\n * Simple query string parser.\n *\n * @param {String} query The query string that needs to be parsed.\n * @returns {Object}\n * @api public\n */\nfunction querystring(query) {\n  var parser = /([^=?&]+)=?([^&]*)/g\n    , result = {}\n    , part;\n\n  //\n  // Little nifty parsing hack, leverage the fact that RegExp.exec increments\n  // the lastIndex property so we can continue executing this loop until we've\n  // parsed all results.\n  //\n  for (;\n    part = parser.exec(query);\n    result[decode(part[1])] = decode(part[2])\n  );\n\n  return result;\n}\n\n/**\n * Transform a query string to an object.\n *\n * @param {Object} obj Object that should be transformed.\n * @param {String} prefix Optional prefix.\n * @returns {String}\n * @api public\n */\nfunction querystringify(obj, prefix) {\n  prefix = prefix || '';\n\n  var pairs = [];\n\n  //\n  // Optionally prefix with a '?' if needed\n  //\n  if ('string' !== typeof prefix) prefix = '?';\n\n  for (var key in obj) {\n    if (has.call(obj, key)) {\n      pairs.push(encodeURIComponent(key) +'='+ encodeURIComponent(obj[key]));\n    }\n  }\n\n  return pairs.length ? prefix + pairs.join('&') : '';\n}\n\n//\n// Expose the module.\n//\nexports.stringify = querystringify;\nexports.parse = querystring;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/querystringify/index.js\n// module id = 5\n// module chunks = 0","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [0, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexport function alwaysPromise(thing) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2 /*return*/, Promise.resolve(thing)];\n        });\n    });\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/alwaysPromise.ts\n// module id = 6\n// module chunks = 0","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [0, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar _this = this;\nimport { tests, testsObservable, config, getUserAgentInfo, getTest, create, getCurrentTestVariation, setCurrentTestVariation, reset, SplitTest, initialize, shouldShowUI } from './main';\nimport { uiFactory } from './ui';\ninitialize();\nvar ui = uiFactory(testsObservable, reset, getCurrentTestVariation, getUserAgentInfo);\nfunction domReady(cb) {\n    if (document.readyState !== 'loading') {\n        return cb();\n    }\n    document.addEventListener('DOMContentLoaded', cb);\n}\ndomReady(function () {\n    setTimeout(function () { return __awaiter(_this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, shouldShowUI()];\n                case 1:\n                    if (_a.sent()) {\n                        ui.show();\n                    }\n                    return [2 /*return*/];\n            }\n        });\n    }); }, 0);\n});\nexport { tests, config, getUserAgentInfo, getTest, create, getCurrentTestVariation, setCurrentTestVariation, reset, ui, SplitTest };\nexport default {\n    tests: tests,\n    config: config,\n    getUserAgentInfo: getUserAgentInfo,\n    getTest: getTest,\n    create: create,\n    getCurrentTestVariation: getCurrentTestVariation,\n    setCurrentTestVariation: setCurrentTestVariation,\n    reset: reset,\n    ui: ui,\n    SplitTest: SplitTest,\n    initialize: initialize\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/index.ts\n// module id = 7\n// module chunks = 0","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [0, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport _getUserAgentInfo from './useragentinfo';\nimport userSession from './usersession';\nimport { SplitTest } from './splittest';\nimport { BehavioralSubject } from './behavioral-subject';\nexport { SplitTest } from './splittest';\nimport { trackingDataExtenderFactory } from './tracking';\nimport qs from 'querystringify';\nimport _config from './config';\nimport { alwaysPromise } from './alwaysPromise';\nvar userAgentInfo = _getUserAgentInfo();\nexport var tests = [];\nexport var testsObservable = new BehavioralSubject(tests);\nexport function config(userConfig) {\n    if (userConfig === void 0) { userConfig = {}; }\n    if (userConfig.cookieName) {\n        _config.cookieName = userConfig.cookieName;\n    }\n    if (userConfig.globalCondition) {\n        _config.globalCondition = userConfig.globalCondition;\n    }\n    if (userConfig.tracking) {\n        _config.tracking = userConfig.tracking;\n    }\n    if (userConfig.uiCondition) {\n        _config.uiCondition = userConfig.uiCondition;\n    }\n    if (userConfig.userSessionDaysToLive) {\n        _config.userSessionDaysToLive = userConfig.userSessionDaysToLive;\n    }\n}\n/**\n * The base tracking data extender supplying general tracking data\n */\nfunction baseTrackingDataExtenderFactory() {\n    return trackingDataExtenderFactory({\n        browser: userAgentInfo.name,\n        browserVersion: userAgentInfo.version,\n        isMobile: userAgentInfo.isMobile\n    });\n}\nfunction initializeFromQueryString(session) {\n    var query = qs.parse(location.search);\n    var abtestParam = query['abtest'];\n    if (typeof abtestParam === 'string') {\n        try {\n            var _a = atob(abtestParam).split('='), test = _a[0], variant = _a[1];\n            session.setTestVariation(test, variant);\n        }\n        catch (e) {\n            // TODO: Handle error.\n        }\n    }\n}\nexport function initialize() {\n    initializeFromQueryString(userSession);\n}\n// Public API\nfunction validateInitialized(test) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, test.isInitialized()];\n                case 1:\n                    if (!(_a.sent())) {\n                        throw new Error(\"Skift: Test \\\"\" + test.name + \"\\\" is not initialized yet!\");\n                    }\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction validateTestName(testName) {\n    if (!getTest(testName)) {\n        throw new Error(\"Skift: Unknown test \\\"\" + testName + \"\\\"\");\n    }\n}\nfunction reloadWithoutAbTestParameter() {\n    var query = qs.parse(location.search);\n    delete query['abtest'];\n    location.href =\n        location.href.replace(location.search, '').replace(location.hash, '') +\n            qs.stringify(query, Object.keys(query).length > 0) +\n            location.hash;\n}\nexport function getUserAgentInfo() {\n    return userAgentInfo;\n}\nexport function getTest(name) {\n    return tests.filter(function (t) { return t.name === name; })[0];\n}\nexport function create(name) {\n    var test = new SplitTest(name, userAgentInfo, baseTrackingDataExtenderFactory());\n    tests.push(test);\n    test.changes.subscribe(function () { return testsObservable.next(tests); });\n    return test;\n}\nexport function getCurrentTestVariation(testName) {\n    validateTestName(testName);\n    validateInitialized(getTest(testName));\n    return userSession.getTestVariation(testName);\n}\nexport function setCurrentTestVariation(testName, variation) {\n    validateTestName(testName);\n    validateInitialized(getTest(testName));\n    userSession.setTestVariation(testName, variation);\n    reloadWithoutAbTestParameter();\n}\nexport function reset() {\n    userSession.reset();\n    reloadWithoutAbTestParameter();\n}\nexport function shouldShowUI() {\n    return __awaiter(this, void 0, void 0, function () {\n        var promises;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    promises = [\n                        _config.globalCondition(userAgentInfo),\n                        _config.uiCondition(userAgentInfo)\n                    ].map(alwaysPromise);\n                    return [4 /*yield*/, Promise.all(promises)];\n                case 1: return [2 /*return*/, (_a.sent()).every(function (a) { return a; })];\n            }\n        });\n    });\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/main.ts\n// module id = 8\n// module chunks = 0","var __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nfunction getNameAndVersion() {\n    var ua = navigator.userAgent;\n    var tem;\n    var match = ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\\/))\\/?\\s*(\\d+)/i) || [];\n    if (/trident/i.test(match[1])) {\n        tem = /\\brv[ :]+(\\d+)/g.exec(ua) || [];\n        return {\n            name: 'IE',\n            version: (tem[1] || '')\n        };\n    }\n    if (match[1] === 'Chrome') {\n        tem = ua.match(/\\bOPR\\/(\\d+)/);\n        if (tem != null) {\n            return {\n                name: 'Opera',\n                version: tem[1]\n            };\n        }\n    }\n    match = match[2] ? [match[1], match[2]] : [navigator.appName, navigator.appVersion, '-?'];\n    tem = ua.match(/version\\/(\\d+)/i);\n    if (tem !== null) {\n        match.splice(1, 1, tem[1]);\n    }\n    return {\n        name: match[0],\n        version: match[1]\n    };\n}\nfunction isMobile() {\n    var ua = navigator.userAgent || navigator.vendor;\n    // Disable the rule for now and consider using RegExp constructor with a string.\n    // tslint:disable-next-line:max-line-length\n    return /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(ua) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(ua.substr(0, 4));\n}\nexport default function getUserAgentInfo() {\n    return __assign({}, getNameAndVersion(), { isMobile: isMobile() });\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/useragentinfo.ts\n// module id = 9\n// module chunks = 0","import config from './config';\nfunction createCookie(name, value, days) {\n    var expires = '';\n    if (days) {\n        var date = new Date();\n        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n        expires = '; expires=' + date.toUTCString();\n    }\n    document.cookie = name + '=' + value + expires + '; path=/';\n}\nfunction readCookie(name) {\n    var nameEq = name + '=';\n    var ca = document.cookie.split(';');\n    for (var i = 0; i < ca.length; i++) {\n        var c = ca[i];\n        while (c.charAt(0) === ' ') {\n            c = c.substring(1, c.length);\n        }\n        if (c.indexOf(nameEq) === 0) {\n            return c.substring(nameEq.length, c.length);\n        }\n    }\n    return null;\n}\nvar persister = {\n    loadUserSession: function () {\n        return readCookie(config.cookieName);\n    },\n    saveUserSession: function (userSession, daysToLive) {\n        createCookie(config.cookieName, userSession, daysToLive);\n    }\n};\nexport default persister;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/usersessioncookiepersister.ts\n// module id = 10\n// module chunks = 0","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [0, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nfunction getVariationPercentage(variation) {\n    return Math.round(variation.normalizedWeight * 100) + '%';\n}\nvar isInitialized = false;\nvar container;\nexport var uiFactory = function (tests, reset, getCurrentTestVariation, getUserAgentInfo) {\n    function renderTest(test) {\n        return __awaiter(this, void 0, void 0, function () {\n            var variation, data_1, variationHtml, canRun;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, test.isInitialized()];\n                    case 1:\n                        if (!_a.sent()) return [3 /*break*/, 2];\n                        variation = getCurrentTestVariation(test.name);\n                        data_1 = {\n                            Test: test.name,\n                            Variation: variation + \" (\" + getVariationPercentage(test.getVariation(variation)) + \")\",\n                            Browser: getUserAgentInfo().name + ' ' + getUserAgentInfo().version,\n                            'Mobile device': getUserAgentInfo().isMobile\n                        };\n                        variationHtml = test.variations.map(function (variant) {\n                            return \"\\n                    <a\\n                        href=\\\"\" + test.getVariationUrl(variant.name) + \"\\\"\\n                        title=\\\"Segment: \" + getVariationPercentage(variant) + \"\\\"\\n                    >\\n                        \" + variant.name + \"\\n                    </a>\\n                \";\n                        });\n                        return [2 /*return*/, \"\\n                <div class=\\\"test\\\">\\n                    <div class=\\\"header\\\">\\n                        Viewing: <span class=\\\"abtest-variant\\\">\" + variation + \"</span>\\n                    </div>\\n                    \" + Object.keys(data_1).map(function (key) { return \"\\n                        <div>\\n                            <span class=\\\"data-label\\\">\" + key + \"</span>\\n                            <span class=\\\"data-value\\\">\" + data_1[key] + \"</span>\\n                        </div>\\n                    \"; }).join('') + \"\\n                    \" + variationHtml.join('&nbsp;&bull;&nbsp;') + \"\\n                </div>\\n            \"];\n                    case 2: return [4 /*yield*/, test.shouldRun(getUserAgentInfo())];\n                    case 3:\n                        canRun = _a.sent();\n                        return [2 /*return*/, \"\\n                <div class=\\\"test\\\">\\n                    <div class=\\\"header\\\">\\n                        Viewing: <span class=\\\"abtest-variant\\\">Not initialized</span>\\n                    </div>\\n                    <div>Test <span class=\\\"data-value\\\">\" + test.name + \"</span> is not initialized</div>\\n                    <div>\\n                        <span class=\\\"data-label\\\">Can run</span>\\n                        <span class=\\\"data-value\\\">\" + canRun + \"</span>\\n                    </div>\\n                </div>\\n            \"];\n                }\n            });\n        });\n    }\n    function showSplitTestUi() {\n        var _this = this;\n        var skift = document.createElement('div');\n        skift.className = 'skift';\n        var style = document.createElement('style');\n        style.innerHTML = require('./ui.css');\n        var testListEl = document.createElement('div');\n        testListEl.className = 'test-list';\n        tests.subscribe(function (list) { return __awaiter(_this, void 0, void 0, function () {\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        while (testListEl.hasChildNodes()) {\n                            testListEl.removeChild(testListEl.lastChild);\n                        }\n                        _a = testListEl;\n                        return [4 /*yield*/, Promise.all(list.map(renderTest))];\n                    case 1:\n                        _a.innerHTML = (_b.sent()).join('');\n                        return [2 /*return*/];\n                }\n            });\n        }); });\n        var previousContainer = document.querySelector('.skift .container');\n        if (previousContainer) {\n            container = previousContainer;\n        }\n        else {\n            container = document.createElement('div');\n            container.appendChild(testListEl);\n            container.className = 'container';\n        }\n        var button = document.createElement('button');\n        button.className = 'reset';\n        button.textContent = 'Reset all';\n        button.setAttribute('type', 'button');\n        button.addEventListener('click', function () {\n            reset();\n        });\n        container.appendChild(button);\n        var close = document.createElement('div');\n        close.className = 'close';\n        close.textContent = 'X';\n        close.addEventListener('click', function () {\n            hide();\n        });\n        container.appendChild(close);\n        skift.appendChild(style);\n        skift.appendChild(container);\n        document.body.appendChild(skift);\n        isInitialized = true;\n    }\n    function show() {\n        if (isInitialized) {\n            container.className = 'container';\n        }\n        else {\n            showSplitTestUi();\n        }\n    }\n    function hide() {\n        container.className = 'container hideme';\n    }\n    return {\n        show: show,\n        hide: hide\n    };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/ui.ts\n// module id = 11\n// module chunks = 0","// css-to-string-loader: transforms styles from css-loader to a string output\n\n// Get the styles\nvar styles = require(\"!!../node_modules/css-loader/index.js!./ui.css\");\n\nif (typeof styles === 'string') {\n  // Return an existing string\n  module.exports = styles;\n} else {\n  // Call the custom toString method from css-loader module\n  module.exports = styles.toString();\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/ui.css\n// module id = 12\n// module chunks = 0","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".skift .container {\\n  position: fixed;\\n  bottom: 15px;\\n  right: 15px;\\n  width: 300px;\\n  height: 300px;\\n  color: #292929;\\n  z-index: 999;\\n  background-color: #FFFFFF;\\n  border: 1px solid #f2800d;\\n  box-shadow: 0 0 0 15px rgba(0, 0, 0, 0.2);\\n  transition: all .5s ease-out;\\n  opacity: 1;\\n}\\n.skift  .container.hideme {\\n  bottom: -350px;\\n  opacity: 0;\\n}\\n.skift .test-list {\\n  overflow-y: scroll;\\n  height: 250px;\\n}\\n.skift .test {\\n  padding: 10px;\\n}\\n.skift .header {\\n  position: relative;\\n  top: 0;\\n  left: 0;\\n  padding: 10px;\\n  margin-bottom: 10px;\\n  background-color: #292929;\\n  color: #FFFFFF;\\n  font-size: 16px;\\n  font-weight: bold;\\n}\\n.skift .data-label {\\n  display: inline-block;\\n  margin-bottom: 2px;\\n  margin-right: 5px;\\n  color: #292929;\\n}\\n.skift .data-label:after {\\n  content: \\\":\\\";\\n}\\n.skift .data-value {\\n  color: #000;\\n  font-weight: bold;\\n  text-transform: capitalize;\\n}\\n.skift .variant {\\n  text-transform: uppercase;\\n  color: #66ff33;\\n}\\n.skift .close {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  position: absolute;\\n  top: -8px;\\n  right: -8px;\\n  background-color: #f2800d;\\n  color: #000;\\n  height: 20px;\\n  width: 20px;\\n  border-radius: 5px;\\n  cursor: pointer;\\n}\\n.skift .reset {\\n  display: block;\\n  margin: 10px auto;\\n  padding: 5px 10px;\\n  background-color: #f2800d;\\n  font-size: 18px;\\n  color: #FFFFFF;\\n  border: 0;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader!./src/ui.css\n// module id = 13\n// module chunks = 0","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader/lib/css-base.js\n// module id = 14\n// module chunks = 0"],"sourceRoot":""}